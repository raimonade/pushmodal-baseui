"use strict";var n=require("react/jsx-runtime"),e=require("react"),t=require("@base-ui/react/dialog"),r=function(){return r=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},r.apply(this,arguments)};function o(n,e,t){if(t||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,exports.createPushModal=function(a){var p,u=a.modals,i=function(n){return!(!n.open&&n.closedAt)||Date.now()-n.closedAt<300},c={all:p=p||new Map,on:function(n,e){var t=p.get(n);t?t.push(e):p.set(n,[e])},off:function(n,e){var t=p.get(n);t&&(e?t.splice(t.indexOf(e)>>>0,1):p.set(n,[]))},emit:function(n,e){var t=p.get(n);t&&t.slice().map((function(n){n(e)})),(t=p.get("*"))&&t.slice().map((function(t){t(n,e)}))}},f=function(n){return c.emit("pop",{name:n})},s=function(n,e){var t=function(t){(t.name===n||"*"===n)&&e(t.open,t.props,t.name)};return c.on("change",t),function(){return c.off("change",t)}};return{ModalProvider:function(){var a=e.useState([]),p=a[0],s=a[1];return e.useEffect((function(){var n;return p.some((function(n){return"number"==typeof n.closedAt}))?n=setInterval((function(){s((function(n){return o([],n.filter(i),!0)}))}),100):clearInterval(n),function(){clearInterval(n)}}),[p]),e.useEffect((function(){var n=function(n){var e=n.name,t=n.props;c.emit("change",{name:e,open:!0,props:t}),s((function(n){return o(o([],n,!0),[{key:Math.random().toString(),name:e,props:t,open:!0}],!1).filter(i)}))},e=function(n){var e=n.name,t=n.props;s((function(n){var a=n.findLast((function(n){return n.open}));return a&&c.emit("change",{name:a.name,open:!1,props:a.props}),c.emit("change",{name:e,open:!0,props:t}),o(o([],n.map((function(n){return n.key===(null==a?void 0:a.key)?r(r({},n),{open:!1,closedAt:Date.now()}):n})).filter(i),!0),[{key:Math.random().toString(),name:e,props:t,open:!0}],!1)}))},t=function(n){var e=n.name;s((function(n){var t=void 0===e?n.length-1:n.findLastIndex((function(n){return n.name===e&&n.open})),o=n[t];return o&&c.emit("change",{name:o.name,open:!1,props:o.props}),n.map((function(n){return(null==o?void 0:o.key)!==n.key?n:r(r({},n),{open:!1,closedAt:Date.now()})}))}))},a=function(){s((function(n){return n.map((function(n){return r(r({},n),{open:!1,closedAt:Date.now()})}))}))};return c.on("push",n),c.on("replace",e),c.on("pop",t),c.on("popAll",a),function(){c.off("push",n),c.off("replace",e),c.off("pop",t),c.off("popAll",a)}}),[p.length]),n.jsx(n.Fragment,{children:p.map((function(o){var a=u[o.name],p="Component"in a?a.Component:a,i="Wrapper"in a?a.Wrapper:t.Dialog.Root;return n.jsx(i,{open:o.open,onOpenChange:function(n){n||f(o.name)},defaultOpen:!0,children:n.jsx(e.Suspense,{children:n.jsx(p,r({},o.props))})},o.key)}))})},pushModal:function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=e[0];return c.emit("push",{name:n,props:null!=r?r:{}})},popModal:f,popAllModals:function(){return c.emit("popAll")},replaceWithModal:function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=e[0];c.emit("replace",{name:n,props:null!=r?r:{}})},onPushModal:s,useOnPushModal:function(n,t){e.useEffect((function(){return s(n,t)}),[n,t])}}},exports.createResponsiveWrapper=function(t){var o=t.mobile,a=t.desktop,p=t.breakpoint,u=void 0===p?640:p;function i(){var n=e.useState(!1),t=n[0],r=n[1];return e.useLayoutEffect((function(){var n=function(n){r(n.matches)},e=window.matchMedia("(max-width: ".concat(u,"px)"));return n(e),e.addEventListener("change",n),function(){e.removeEventListener("change",n)}}),[]),t}return{Wrapper:function(e){return i()?n.jsx(o.Wrapper,r({},e)):n.jsx(a.Wrapper,r({},e))},Content:function(e){return i()?n.jsx(o.Content,r({},e)):n.jsx(a.Content,r({},e))}}};
//# sourceMappingURL=index.cjs.js.map
